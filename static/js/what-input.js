window.whatInput=function(){var e,t=[],n=!1,o=null,i=["button","checkbox","file","image","radio","reset","submit"],r=L(),u=[16,17,18,91,93],d={keydown:"keyboard",keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"};d[L()]="mouse";var a,s=[],c={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},p={2:"touch",3:"touch",4:"mouse"};function w(){v(),y(event),n=!0,a=window.setTimeout(function(){n=!1},650)}function f(e){n||y(e)}function m(e){v(),y(e)}function v(){window.clearTimeout(a)}function y(n){var r=l(n),a=d[n.type];if("pointer"===a&&(a=function(e){return"number"==typeof e.pointerType?p[e.pointerType]:"pen"===e.pointerType?"touch":e.pointerType}(n)),o!==a){var s=function(e){return e.target||e.srcElement}(n),w=s.nodeName.toLowerCase(),f="input"===w?s.getAttribute("type"):null;!e.hasAttribute("data-whatinput-formtyping")&&o&&"keyboard"===a&&"tab"!==c[r]&&("textarea"===w||"select"===w||"input"===w&&i.indexOf(f)<0)||u.indexOf(r)>-1||h(a)}"keyboard"===a&&function(e){-1===t.indexOf(c[e])&&c[e]&&t.push(c[e])}(r)}function h(t){o=t,e.setAttribute("data-whatinput",o),-1===s.indexOf(o)&&s.push(o)}function l(e){return e.keyCode?e.keyCode:e.which}function E(e){var n=l(e),o=t.indexOf(c[n]);-1!==o&&t.splice(o,1)}function b(){e=document.body,window.PointerEvent?(e.addEventListener("pointerdown",f),e.addEventListener("pointermove",f)):window.MSPointerEvent?(e.addEventListener("MSPointerDown",f),e.addEventListener("MSPointerMove",f)):(e.addEventListener("mousedown",f),e.addEventListener("mousemove",f),"ontouchstart"in window&&e.addEventListener("touchstart",w)),e.addEventListener(r,f),e.addEventListener("keydown",m),e.addEventListener("keyup",m),document.addEventListener("keyup",E)}function L(){return r="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}return"addEventListener"in window&&Array.prototype.indexOf&&(document.body?b():document.addEventListener("DOMContentLoaded",b)),{ask:function(){return o},keys:function(){return t},types:function(){return s},set:h}}();